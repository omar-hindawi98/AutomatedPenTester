#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import configparser
import os

'''
Helper function for reading configuration file
'''
_config = None

def read_config():
    config = configparser.ConfigParser()
    config.read("../config.ini")
    return config

def config():
    global _config

    if not _config:
        read_config()
    
    return _config

'''
Helper function for creating new target
'''
def create_new_target(target):
    target_loc = f'{os.getcwd()}/targets/{target}'

    # Create directories
    os.mkdir(os.path.join(f'{os.getcwd()}/targets', target))
    os.mkdir(os.path.join(target_loc, "regtests"))
    os.mkdir(os.path.join(target_loc, "results"))

    # Create files
    with open(f'{target_loc}/config.ini', 'w'): pass

    with open(f'{target_loc}/topology.json', 'w'): pass