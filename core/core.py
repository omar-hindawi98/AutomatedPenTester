#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from core.helper import create_new_target, read_config
from database.db import connect
import argparse
import os

'''
Initializes the program
'''
def load():
    # Get args
    args = get_args()

    # Load config file
    read_config()

    # Connect to database
    #connect()

    # Read from command line
    while True:
        read_cli()

'''
Get CLI arguments
'''
def get_args():
    parser = argparse.ArgumentParser("python3 main.py")

    return parser.parse_args()
    
'''
Specify which target to run against
'''
def read_cli():
    target = input("Choose target: ")

    # Check if target exists
    if(os.path.isdir(os.path.join(f'{os.getcwd()}/targets', target))):
        print("Exists")
    else:
        # Create new target
        print(f"{target} does not exists, creating new folder")

        create_new_target(target)


        print(f"Folder for {target} created, please configure it before retrying")


'''
Checks that all dependencies are present
'''
def check_dependencies():
    pass
