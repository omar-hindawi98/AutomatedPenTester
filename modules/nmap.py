#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from core.regressiontest import RegressionTest
from core.module import Module


'''
Define core module here
'''
class NmapModule(Module):   
    _cmd = ""               # Vad tänkte du att detta skulle vara? Kommandot som ska köras i run?
    _regex = ""             # Vad vi ska regex:a på (hur vi vill få ut som parse) vad vi får från run()?
    _type = "IG"

    def run(self):
        
        """
        Du tänker att run() ska köra kommando i terminalen?
        """

        command = ["nmap", "-sS", "-A", "-p-", "-v", "-oN", "test.txt"]     # get command from JSON later
        target = "10.10.10.13"    

        try:
            subprocess.run(command + [target])
            # Add subprocess functions?
            # Save output into correct target dir.
            # Save how? txt. xml etc?

        except OSError as err:
            print("Execution failed:", err, file=sys.stderr)

    def parse(self):


        # Save results for regression tests to retrieve
        super().save_result("")
    
    def get_result(self):
        pass



'''
Define regression tests here
'''
class NmapPortRegression(RegressionTest):
    def run(self):
        pass
    
    def parse(self):
        pass
    
    def get_result(self):
        pass

    def check():
        print("CHECKING")
        pass